---
import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <Header />
  <h1 class="text-2xl font-extrabold mb-4 text-center bg-clip-text text-amber-50" style="background: linear-gradient(90deg,#2563eb,#10b981);">
    Penguins par esp√®ce (iframe)
  </h1>

  <nav>
    <select id="species-iframe">
      <option value="/species/Adelie">Adelie</option>
      <option value="/species/Chinstrap">Chinstrap</option>
      <option value="/species/Gentoo">Gentoo</option>
    </select>
  </nav>

  <iframe
    id="penguinFrame"
    src="/species/Adelie"
    style="width:100%; min-height:600px; border:1px solid #ccc; margin-top:1rem; transition:height 0.2s;"
    onload="resizeIframe(this)"
  ></iframe>

  <script>
    const selectIframe = document.querySelector("#species-iframe");
    const iframe = document.querySelector("#penguinFrame");

    selectIframe.addEventListener("change", (evt) => {
      const value = (evt.target as HTMLSelectElement).value;
      iframe.src = value;
    });

    function resizeIframe(iframe) {
      try {
        setTimeout(() => {
          if (iframe.contentWindow && iframe.contentWindow.document.body) {
            const newHeight = iframe.contentWindow.document.body.scrollHeight;
            iframe.style.height = (newHeight > 600 ? newHeight : 600) + "px";
          }
        }, 150);
      } catch (e) {}
    }
  </script>
</Layout>

<style>
  nav {
    display: flex;
    justify-content: center;
    margin: 1.5rem 0;
  }

  select {
    padding: 0.25rem 0.5rem;
    font-weight: 500;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    background: white;
    color: #374151;
    transition: border-color 0.2s ease;
  }

  select:hover {
    border-color: #2563eb;
  }
</style>
